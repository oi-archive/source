
# Description

<div class="content"><div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium">小明和小华要参加NOI，踏上了去X市的火车。</span></div>
<div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium">小明望着窗外的田野，大楼，工厂缓缓后退，在思考着什么。</span></div>
<div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium">这时，对面的小华拿出手机对着他说：“看！我们在这个位置！”</span></div>
<div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium">小明望着手机上显示的地图，城市被接到分割成各个方块，而自己所在的点在慢慢移动。</span></div>
<div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium">他突然意识到自己甚至还没游历过这个自己所在的小城市，学校和家貌以及之间来回的道路似乎成了这个小城的唯一印象。</span></div>
<div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium">若我把它们全部走一圈，可能要仔细计划下吧……不，那么多方案，其实我应该早能做到了吧……小明在心里对自己说。</span></div>
<div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium"> </span></div></div>

# Input

<div class="content"><div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium">第一行有两个数N, M表示地图被分割成N*M个块，接下来有N行，每行有M个字符。</span></div>
<div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium"> .  表示这个块可以通过</span></div>
<div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium"> - 表示这个块只可以左右通过</span></div>
<div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium"> | 表示这个块只可以上下通过</span></div>
<div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium"> # 表示这个块不能通过</span></div>
<div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium">（从每个块只能走到其上下左右相邻的四个块）</span></div>
<div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium"> </span></div></div>

# Output

<div class="content"><div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium">一个数，表示小明把所以可以通过的块都经过且只经过一次并回到原地的方案数。</span></div>
<div style="text-align: justify; widows: 2; text-transform: none; background-color: rgb(255,255,255); margin-top: 0pt; text-indent: 0px; font: 10.5pt Calibri; white-space: normal; orphans: 2; margin-bottom: 0pt; letter-spacing: normal; color: rgb(0,0,0); margin-left: 0pt; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><span style="font-size: medium"> </span></div></div>

# Sample Input

<div class="content"><span class="sampledata">Sample 1<br/>
2 2<br/>
..<br/>
..<br/>
 <br/>
 <br/>
Sample 2<br/>
Input:<br/>
4 4<br/>
....<br/>
..-.<br/>
....<br/>
....<br/>
 <br/>
</span></div>

# Sample Output

<div class="content"><span class="sampledata">Output 1<br/>
1<br/>
<br/>
<br/>
Output 2<br/>
1</span></div>

# Hint

<div class="content"><p></p><p>数据范围: 0 &lt; N, M &lt; 13 不保证答案在long 范围之内</p><p></p></div>

# Source

<div class="content"><p><a href="problemset.php?search=taorunz提供">taorunz提供</a></p></div>

