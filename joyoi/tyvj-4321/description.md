# 

 
 # 题目背景 
<p>本题翻译自CodeForces&nbsp;的612C&nbsp;题，版权不归Tyvj所有，我们只做大家的搬运工。</p> 

 
 # 题目描述 
<p><span style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 21px; line-height: 21px; text-align: center;">Replace&nbsp;To&nbsp;Make&nbsp;Regular&nbsp;Bracket&nbsp;Sequence</span></p>

<p style="margin: 1.5em 0px 0px; padding: 0px; font-size: 14px; line-height: 1.4em; color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">原题：You&nbsp;are&nbsp;given&nbsp;string&nbsp;<span class="tex-span" style="font-size: 17.5px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i></span>&nbsp;consists&nbsp;of&nbsp;opening&nbsp;and&nbsp;closing&nbsp;brackets&nbsp;of&nbsp;four&nbsp;kinds&nbsp;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">&lt;&gt;</span>,&nbsp;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">{}</span>,&nbsp;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">[]</span>,&nbsp;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">()</span>.&nbsp;There&nbsp;are&nbsp;two&nbsp;types&nbsp;of&nbsp;brackets:&nbsp;opening&nbsp;and&nbsp;closing.&nbsp;You&nbsp;can&nbsp;replace&nbsp;any&nbsp;bracket&nbsp;by&nbsp;another&nbsp;of&nbsp;the&nbsp;same&nbsp;type.&nbsp;For&nbsp;example,&nbsp;you&nbsp;can&nbsp;replace&nbsp;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">&lt;</span>&nbsp;by&nbsp;the&nbsp;bracket&nbsp;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">{</span>,&nbsp;but&nbsp;you&nbsp;can&#39;t&nbsp;replace&nbsp;it&nbsp;by&nbsp;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">)</span>&nbsp;or&nbsp;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">&gt;</span>.</p>

<p style="margin: 1.5em 0px 0px; padding: 0px; font-size: 14px; line-height: 1.4em; color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">The&nbsp;following&nbsp;definition&nbsp;of&nbsp;a&nbsp;regular&nbsp;bracket&nbsp;sequence&nbsp;is&nbsp;well-known,&nbsp;so&nbsp;you&nbsp;can&nbsp;be&nbsp;familiar&nbsp;with&nbsp;it.</p>

<p style="margin: 1.5em 0px 0px; padding: 0px; font-size: 14px; line-height: 1.4em; color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">Let&#39;s&nbsp;define&nbsp;a&nbsp;regular&nbsp;bracket&nbsp;sequence&nbsp;(RBS).&nbsp;Empty&nbsp;string&nbsp;is&nbsp;RBS.&nbsp;Let&nbsp;<span class="tex-span" style="font-size: 17.5px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 13.125px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">1</span></span>&nbsp;and&nbsp;<span class="tex-span" style="font-size: 17.5px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 13.125px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">2</span></span>&nbsp;be&nbsp;a&nbsp;RBS&nbsp;then&nbsp;the&nbsp;strings&nbsp;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">&lt;<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">1</span></span>&gt;<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">2</span></span></span>,&nbsp;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">{<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">1</span></span>}<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">2</span></span></span>,&nbsp;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">[<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">1</span></span>]<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">2</span></span></span>,<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">(<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">1</span></span>)<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">2</span></span></span>&nbsp;are&nbsp;also&nbsp;RBS.</p>

<p style="margin: 1.5em 0px 0px; padding: 0px; font-size: 14px; line-height: 1.4em; color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">For&nbsp;example&nbsp;the&nbsp;string&nbsp;&quot;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">[[(){}]&lt;&gt;]</span>&quot;&nbsp;is&nbsp;RBS,&nbsp;but&nbsp;the&nbsp;strings&nbsp;&quot;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">[)()</span>&quot;&nbsp;and&nbsp;&quot;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">][()()</span>&quot;&nbsp;are&nbsp;not.</p>

<p style="margin: 1.5em 0px 0px; padding: 0px; font-size: 14px; line-height: 1.4em; color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">Determine&nbsp;the&nbsp;least&nbsp;number&nbsp;of&nbsp;replaces&nbsp;to&nbsp;make&nbsp;the&nbsp;string&nbsp;<span class="tex-span" style="font-size: 17.5px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i></span>&nbsp;RBS.</p>

<p style="margin: 1.5em 0px 0px; padding: 0px; font-size: 14px; line-height: 1.4em; color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">原题翻译：字符串S是包含4种：<span style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19.6px;">&nbsp;</span><span class="tex-font-style-tt" style="color: rgb(34, 34, 34); line-height: 19.6px; font-size: 15.4px; font-family: 'courier new', monospace;">&lt;&gt;</span><span style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19.6px;">,&nbsp;</span><span class="tex-font-style-tt" style="color: rgb(34, 34, 34); line-height: 19.6px; font-size: 15.4px; font-family: 'courier new', monospace;">{}</span><span style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19.6px;">,&nbsp;</span><span class="tex-font-style-tt" style="color: rgb(34, 34, 34); line-height: 19.6px; font-size: 15.4px; font-family: 'courier new', monospace;">[]</span><span style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19.6px;">,&nbsp;</span><span class="tex-font-style-tt" style="color: rgb(34, 34, 34); line-height: 19.6px; font-size: 15.4px; font-family: 'courier new', monospace;">(）的开</span>括号和闭括号。括号的分类即开括号（左括号）和闭括号（右括号）。你能够用同种的括号替换相同种类的括号，但你不能用一种括号替换另一种类型的括号。</p>

<p style="margin: 1.5em 0px 0px; padding: 0px; font-size: 14px; line-height: 1.4em; color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">例如，你能够用{代替&lt;&nbsp;但是你不能用&nbsp;)或者}代替&lt;&nbsp;.</p>

<p style="margin: 1.5em 0px 0px; padding: 0px; font-size: 14px; line-height: 1.4em; color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="line-height: 1.4em;">下面的关于一个正常的括号序列的定义是大家都熟知的</span><span style="line-height: 1.4em;">,&nbsp;所以你应该熟悉它</span><span style="line-height: 1.4em;">.</span></p>

<p style="margin: 1.5em 0px 0px; padding: 0px; font-size: 14px; line-height: 1.4em; color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">让我们定义一个&nbsp;正常的括号序列(RBS).&nbsp;空的字符串也是RBS.&nbsp;我们令&nbsp;<span class="tex-span" style="font-size: 17.5px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 13.125px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">1</span></span>&nbsp;和&nbsp;<span class="tex-span" style="font-size: 17.5px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 13.125px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">2&nbsp;</span></span>&nbsp;是&nbsp;RBS。&nbsp;那么字符串&nbsp;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">&lt;<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">1</span></span>&gt;<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">2</span></span></span>,&nbsp;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">{<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">1</span></span>}<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">2</span></span></span>,&nbsp;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">[<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">1</span></span>]<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">2</span></span></span>,<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">(<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">1</span></span>)<span class="tex-span" style="font-size: 19.25px; font-family: 'times new roman', sans-serif; white-space: nowrap;"><i>s</i><span class="lower-index" style="font-size: 14.4375px; line-height: 0; position: relative; vertical-align: baseline; bottom: -0.25em;">2</span></span></span>&nbsp;也是&nbsp;RBS.</p>

<p style="margin: 1.5em 0px 0px; padding: 0px; font-size: 14px; line-height: 1.4em; color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">例如字符串&nbsp;&quot;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">[[(){}]&lt;&gt;]</span>&quot;&nbsp;是&nbsp;RBS,&nbsp;但是字符串&nbsp;&quot;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">[)()</span>&quot;&nbsp;和&nbsp;&quot;<span class="tex-font-style-tt" style="font-size: 15.4px; font-family: 'courier new', monospace;">][()()</span>&quot;&nbsp;就不是RBS。</p>

<p style="margin: 1.5em 0px 0px; padding: 0px; font-size: 14px; line-height: 1.4em; color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">那么&nbsp;计算出最小的替换数令字符串s为RBS。</p>

<p style="margin: 1.5em 0px 0px; padding: 0px; font-size: 14px; line-height: 1.4em; color: rgb(34, 34, 34); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">如果替换不了输出：</p>

<pre style="margin-top: 0px; margin-bottom: 0px; padding: 0.25em; font-size: 12.6px; font-family: Consolas, 'Lucida Console', 'Andale Mono', 'Bitstream Vera Sans Mono', 'Courier New', Courier; line-height: 1.25em; color: rgb(136, 0, 0); background-color: rgb(239, 239, 239);">
Impossible</pre> 

 
 # 输入格式 
<div class="title" style="margin: 0px; padding: 0.25em; font-size: 1.3em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(136, 136, 136); text-transform: lowercase; font-weight: bold; color: rgb(34, 34, 34); font-family: Consolas, 'Lucida Console', 'Andale Mono', 'Bitstream Vera Sans Mono', 'Courier New', Courier; line-height: 21px;">1.input</div>

<pre style="margin-top: 0px; margin-bottom: 0px; padding: 0.25em; font-size: 12.6px; font-family: Consolas, 'Lucida Console', 'Andale Mono', 'Bitstream Vera Sans Mono', 'Courier New', Courier; line-height: 1.25em; color: rgb(136, 0, 0); background-color: rgb(239, 239, 239);">
[&lt;}){}</pre>

<div class="title" style="margin: 0px; padding: 0.25em; font-size: 1.3em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(136, 136, 136); text-transform: lowercase; font-weight: bold; color: rgb(34, 34, 34); font-family: Consolas, 'Lucida Console', 'Andale Mono', 'Bitstream Vera Sans Mono', 'Courier New', Courier; line-height: 21px;">2.input</div>

<pre style="margin-top: 0px; margin-bottom: 0px; padding: 0.25em; font-size: 12.6px; font-family: Consolas, 'Lucida Console', 'Andale Mono', 'Bitstream Vera Sans Mono', 'Courier New', Courier; line-height: 1.25em; color: rgb(136, 0, 0); background-color: rgb(239, 239, 239);">
]]</pre> 

 
 # 输出格式 
<div class="title" style="margin: 0px; padding: 0.25em; font-size: 1.3em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(136, 136, 136); text-transform: lowercase; font-weight: bold; color: rgb(34, 34, 34); font-family: Consolas, 'Lucida Console', 'Andale Mono', 'Bitstream Vera Sans Mono', 'Courier New', Courier; line-height: 21px;">1.output</div>

<pre style="margin-top: 0px; margin-bottom: 0px; padding: 0.25em; font-size: 12.6px; font-family: Consolas, 'Lucida Console', 'Andale Mono', 'Bitstream Vera Sans Mono', 'Courier New', Courier; line-height: 1.25em; color: rgb(136, 0, 0); background-color: rgb(239, 239, 239);">
2</pre>

<div class="title" style="margin: 0px; padding: 0.25em; font-size: 1.3em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(136, 136, 136); text-transform: lowercase; font-weight: bold; color: rgb(34, 34, 34); font-family: Consolas, 'Lucida Console', 'Andale Mono', 'Bitstream Vera Sans Mono', 'Courier New', Courier; line-height: 21px;">2.output</div>

<pre style="margin-top: 0px; margin-bottom: 0px; padding: 0.25em; font-size: 12.6px; font-family: Consolas, 'Lucida Console', 'Andale Mono', 'Bitstream Vera Sans Mono', 'Courier New', Courier; line-height: 1.25em; color: rgb(136, 0, 0); background-color: rgb(239, 239, 239);">
Impossible</pre> 
